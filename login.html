<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login / Registro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="login-styles.css">
</head>
<body>
    <div class="container">
        <div class="container-form">
            <form class="sign-in" method="POST" action="login_procesar.php" novalidate>
                <h2>Iniciar sesión</h2>
                <span>Usa tu usuario y contraseña</span>
                <div class="container-input">
                    <i class="fa fa-user" aria-hidden="true"></i>
                    <input type="text" name="usuario" placeholder="Usuario" aria-label="Usuario" required autocomplete="username" minlength="3">
                </div>
                <div class="container-input">
                    <i class="fa fa-lock" aria-hidden="true"></i>
                    <input type="password" name="contrasena" placeholder="Contraseña" aria-label="Contraseña" required autocomplete="current-password" minlength="6">
                    <button type="button" class="toggle-password" aria-label="Mostrar u ocultar contraseña">
                        <i class="fa fa-eye"></i>
                    </button>
                </div>
                <button class="button" type="submit">Iniciar sesión</button>
            </form>
        </div>
        <div class="container-form">
            <form class="sign-up" method="POST" action="registro_procesar.php" novalidate>
                <h2>Registrarse</h2>
                <span>Usa tus datos para registrarte</span>
                <div class="container-input">
                    <i class="fa fa-user" aria-hidden="true"></i>
                    <input type="text" name="nombre" placeholder="Nombre" aria-label="Nombre" required autocomplete="name" minlength="2">
                </div>
                <div class="container-input">
                    <i class="fa fa-user-circle" aria-hidden="true"></i>
                    <input type="text" name="usuario" placeholder="Usuario" aria-label="Usuario" required autocomplete="username" minlength="3">
                </div>
                <div class="container-input">
                    <i class="fa fa-envelope" aria-hidden="true"></i>
                    <input type="email" name="email" placeholder="Correo electrónico" aria-label="Correo electrónico" required autocomplete="email">
                </div>
                <div class="container-input">
                    <i class="fa fa-lock" aria-hidden="true"></i>
                    <input type="password" name="contrasena" placeholder="Contraseña" aria-label="Contraseña" required autocomplete="new-password" minlength="6">
                    <button type="button" class="toggle-password" aria-label="Mostrar u ocultar contraseña">
                        <i class="fa fa-eye"></i>
                    </button>
                </div>
                <button class="button" type="submit">Registrarse</button>
            </form>
        </div>
        <div class="conatiner-welcome">
            <div class="welcome-sign-up welcome">
                <h3>Bienvenido</h3>
                <p>Ingresa tus datos personales para usar todas las funciones de la página</p>
                <button class="button" id="btn-sign-up">Registrarse</button>
            </div>
            <div class="welcome-sign-in welcome">
                <h3>Hola</h3>
                <p>Inicia sesión con tu usuario y contraseña para acceder a todas las funciones</p>
                <button class="button" id="btn-sign-in">Iniciar sesión</button>
            </div>
        </div>
    </div>
    <script>
    const container = document.querySelector(".container");
    const btnsignin = document.getElementById("btn-sign-in");
    const btnsigup = document.getElementById("btn-sign-up");
    if (btnsignin && btnsigup) {
      btnsignin.addEventListener("click",()=>{ container.classList.remove("toggle"); });
      btnsigup.addEventListener("click",()=>{ container.classList.add("toggle"); });
    }

    // Mostrar / ocultar contraseña
    document.querySelectorAll('.toggle-password').forEach((btn)=>{
      btn.addEventListener('click', ()=>{
        const input = btn.closest('.container-input')?.querySelector('input');
        const icon = btn.querySelector('i');
        if (!input) return;
        const show = input.type === 'password';
        input.type = show ? 'text' : 'password';
        if (icon) { icon.classList.toggle('fa-eye'); icon.classList.toggle('fa-eye-slash'); }
      });
    });

    // Estado de envío y validación nativa
    document.querySelectorAll('form').forEach((form)=>{
      form.addEventListener('submit',(e)=>{
        if (!form.checkValidity()) {
          e.preventDefault();
          form.classList.remove('form-invalid');
          // fuerza reflow para reiniciar animación
          // eslint-disable-next-line no-unused-expressions
          void form.offsetWidth;
          form.classList.add('form-invalid');
          return;
        }
        const submitBtn = form.querySelector('button[type="submit"]');
        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.dataset.originalText = submitBtn.textContent || '';
          submitBtn.textContent = 'Enviando...';
        }
      });
    });
    </script>
</body>
</html> 